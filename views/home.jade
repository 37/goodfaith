extends layout

block content
    // Main
    #have.tab.active
        div
            h2 Your tags

        article.container
            form.form-horizontal(action='/Preferences', method='POST')
                input(type='hidden', name='_csrf', value=_csrf)
                .title
                    h3 Categories
                .group
                    ul#categories
                        li.tagit-choice.ui-widget-content.ui-state-default.ui-corner-all.tagit-choice-editable
                            span.tagit-label Technology


                .title
                    h3 KeyWords
                .group
                    ul#keywords
                        li.tagit-choice.ui-widget-content.ui-state-default.ui-corner-all.tagit-choice-editable
                            span.tagit-label Drone
                        li.tagit-choice.ui-widget-content.ui-state-default.ui-corner-all.tagit-choice-editable
                            span.tagit-label IoT
                        li.tagit-choice.ui-widget-content.ui-state-default.ui-corner-all.tagit-choice-editable
                            span.tagit-label RC
                        li.tagit-choice.ui-widget-content.ui-state-default.ui-corner-all.tagit-choice-editable
                            span.tagit-label Flight
                        li.tagit-choice.ui-widget-content.ui-state-default.ui-corner-all.tagit-choice-editable
                            span.tagit-label Startup
                        li.tagit-choice.ui-widget-content.ui-state-default.ui-corner-all.tagit-choice-editable
                            span.tagit-label Innovation
                        li.tagit-choice.ui-widget-content.ui-state-default.ui-corner-all.tagit-choice-editable
                            span.tagit-label Fun

                .form-group
                    .col-sm-offset-3.col-sm-4
                    button.btn.btn-submit.btn-primary(type='submit')
                        | Save
    #need.tab
        div
            h2 Your tags
        article.container
            form.form-horizontal(action='/Preferences', method='POST')
                input(type='hidden', name='_csrf', value=_csrf)
                .title
                    h3 Categories
                .group
                    ul#categories
                        li.tagit-choice.ui-widget-content.ui-state-default.ui-corner-all.tagit-choice-editable
                            span.tagit-label Technology


                .title
                    h3 KeyWords
                .group
                    ul#keywords
                        li.tagit-choice.ui-widget-content.ui-state-default.ui-corner-all.tagit-choice-editable
                            span.tagit-label Drone
                        li.tagit-choice.ui-widget-content.ui-state-default.ui-corner-all.tagit-choice-editable
                            span.tagit-label IoT
                        li.tagit-choice.ui-widget-content.ui-state-default.ui-corner-all.tagit-choice-editable
                            span.tagit-label RC
                        li.tagit-choice.ui-widget-content.ui-state-default.ui-corner-all.tagit-choice-editable
                            span.tagit-label Flight
                        li.tagit-choice.ui-widget-content.ui-state-default.ui-corner-all.tagit-choice-editable
                            span.tagit-label Startup
                        li.tagit-choice.ui-widget-content.ui-state-default.ui-corner-all.tagit-choice-editable
                            span.tagit-label Innovation
                        li.tagit-choice.ui-widget-content.ui-state-default.ui-corner-all.tagit-choice-editable
                            span.tagit-label Fun

                .form-group
                    .col-sm-offset-3.col-sm-4
                    button.btn.btn-submit.btn-primary(type='submit')
                        | Save
    #deliver.tab
        .title
            h2 Account settings
        article.container
            h2 Account
            form.form-horizontal(action='/account/profile', method='POST')
                input(type='hidden', name='_csrf', value=_csrf)
                .form-group
                    label.col-sm-3.control-label(for='email') Email
                    .col-sm-7
                        input.form-control(type='email', name='email', id='email', value='#{user.email}')
                .form-group
                    label.col-sm-3.control-label(for='name') Name
                    .col-sm-7
                        input.form-control(type='text', name='name', id='name', value='#{user.profile.name}')
                .form-group
                    label.col-sm-3.control-label(for='location') Location
                    .col-sm-7
                        input.form-control(type='text', name='location', id='location', value='#{user.profile.location}')
                .form-group
                    label.col-sm-3.control-label(for='website') Website
                    .col-sm-7
                        input.form-control(type='text', name='website', id='website', value='#{user.profile.website}')
                .form-group
                    label.col-sm-3.control-label(for='gravatar') Gravatar
                    .col-sm-4
                        img(src="#{user.gravatar()}", class='profile', width='100', height='100')
                .form-group
                    .col-sm-offset-3.col-sm-4
                        button.btn.btn.btn-primary(type='submit')
                            i.fa.fa-pencilr
                            | Update Profile
                            article.container
        article.container
            h2 Change Password

            form.form-horizontal(action='/account/password', method='POST')
                input(type='hidden', name='_csrf', value=_csrf)
                .form-group
                    label.col-sm-3.control-label(for='password') New Password
                    .col-sm-7
                        input.form-control(type='password', name='password', id='password')
                .form-group
                    label.col-sm-3.control-label(for='confirmPassword') Confirm Password
                    .col-sm-7
                    input.form-control(type='password', name='confirmPassword', id='confirmPassword')
                .form-group
                    .col-sm-offset-3.col-sm-4
                        button.btn.btn-primary(type='submit')
                            i.fa.fa-lock
                            | Change Password

        article.container
            h2 Delete Account
            form.form-horizontal(action='/account/delete', method='POST')
                .form-group
                    p.col-sm-offset-3.col-sm-4 You can delete your account, but keep in mind this action is irreversible.
                    input(type='hidden', name='_csrf', value=_csrf)
                    .col-sm-offset-3.col-sm-4
                    button.btn.btn-danger(type='submit')
                        i.fa.fa-trash
                        | Delete my account
    #settings.tab
        img#metric1(src="/images/change-over-time.png")
        div
            h2 Metrics will appear here.
            pre(style="background-color: white;") #{user}

    // Sidebar
    include partials/sidebar.jade

block footerscripts

    script(type='text/javascript' src='js/tagit.js')
    link(rel='stylesheet', href='/css/tagit.css')
    link(rel='stylesheet', href='/css/zendesktags.css')
    script(type="text/javascript").
        var options = {
            autocomplete: {delay: 0, minLength: 2},
            showAutocompleteOnFocus: false,
            removeConfirmation: false,
            allowDuplicates: false,
            allowSpaces: false,
            readOnly: false,
            tagLimit: null,
            singleField: false,
            singleFieldDelimiter: ',',
            singleFieldNode: null,
            tabIndex: null,
            placeholderText: null
        };

        var cat = ["Technology", "Science", "Design", "Business", "Racing", "Television"];
        var key = ["Internet", "IoT", "Coding", "Hackathon", "Startup", "MachineLearning"];


        $(document).ready(function() {
            // Category tag initialisation
            $("#categories").tagit({
                fieldName: 'category',
                availableTags: cat,
                options
            });

            // Keyword tag initialisation
            $("#keywords").tagit({
                fieldName: 'keywords',
                availableTags: key,
                options
            });
        });

        // Intrapage navigation
        $('body').on('click', '.action-btn', function(e){
            var button = $(this);
            var link = $(button).attr('data-link');
            var target = document.getElementById(link);

            console.log('action triggered.');
            $('.action-btn').removeClass('active');
            $(button).addClass('active');
            $('.tab').hide();
            $(target).fadeIn(300, function(){
                $('#wrapper').attr('class', link);
                $(target).addClass('active');
            });

        });
